"use strict";(()=>{var e={};e.id=954,e.ids=[954],e.modules={5600:e=>{e.exports=require("next/dist/compiled/next-server/pages-api.runtime.prod.js")},1428:e=>{e.exports=import("axios")},6762:(e,t)=>{Object.defineProperty(t,"M",{enumerable:!0,get:function(){return function e(t,o){return o in t?t[o]:"then"in t&&"function"==typeof t.then?t.then(t=>e(t,o)):"function"==typeof t&&"default"===o?t:void 0}}})},8737:(e,t,o)=>{o.a(e,async(e,a)=>{try{o.r(t),o.d(t,{config:()=>c,default:()=>d,routeModule:()=>u});var n=o(9947),s=o(2706),r=o(6762),i=o(7091),l=e([i]);i=(l.then?(await l)():l)[0];let d=(0,r.M)(i,"default"),c=(0,r.M)(i,"config"),u=new n.PagesAPIRouteModule({definition:{kind:s.A.PAGES_API,page:"/api/webhook",pathname:"/api/webhook",bundlePath:"",filename:""},userland:i});a()}catch(e){a(e)}})},7091:(e,t,o)=>{o.a(e,async(e,a)=>{try{o.r(t),o.d(t,{default:()=>r});var n=o(5670),s=e([n]);n=(s.then?(await s)():s)[0];let i=null;async function r(e,t){if("POST"===e.method){let{notifications:o}=e.body;if(o&&o.length>0){let{data:e,message:a}=o[0],{system:s}=e,{id:r,name:l,codename:d,collection:c,workflow:u,workflow_step:m,language:p,type:f,last_modified:h}=s,{environment_id:P,object_type:A,action:g,delivery_slot:y}=a;i={systemId:r,systemName:l,systemCodename:d,systemCollection:c,systemWorkflow:u,systemWorkflowStep:m,systemLanguage:p,systemType:f,systemLastModified:h,messageEnvironmentId:P,messageObjectType:A,messageAction:g,messageDeliverySlot:y};try{let e=await (0,n.z)("test"),o=e.data.item.elements.title?.value,a=e.data.item.elements.body?.value,s=e.data.item.elements.image?.value[0].url;console.log("Response:",e.data.item.elements),console.log("Test:",o),console.log("Test:",a),console.log("Test:",s),t.status(200).json({message:"Webhook success"})}catch(e){t.status(500).send(`Webhook error: ${e}`)}}else t.status(200).json({message:"No notifications found in the webhook data"})}else"GET"===e.method?t.status(200).json(i||{message:"No data received yet."}):(t.setHeader("Allow",["POST","GET"]),t.status(405).end(`Method ${e.method} Not Allowed`))}a()}catch(e){a(e)}})},5670:(e,t,o)=>{o.a(e,async(e,a)=>{try{o.d(t,{z:()=>r});var n=o(1428),s=e([n]);n=(s.then?(await s)():s)[0];let r=async e=>{let t=process.env.KONTENT_DAPI_URL,o=process.env.KONTENT_ID,a=process.env.KONTENT_DAPI,s=`${t}/${o}/items/${e}`;try{return await n.default.get(s,{headers:{Authorization:`Bearer ${a}`,Accept:"application/json"}})}catch(e){throw console.error("Error getting Content Item:",JSON.stringify({message:e.message,status:e.response?.status,data:e.response?.data},null,2)),e}};a()}catch(e){a(e)}})},2706:(e,t)=>{Object.defineProperty(t,"A",{enumerable:!0,get:function(){return o}});var o=function(e){return e.PAGES="PAGES",e.PAGES_API="PAGES_API",e.APP_PAGE="APP_PAGE",e.APP_ROUTE="APP_ROUTE",e.IMAGE="IMAGE",e}({})},9947:(e,t,o)=>{e.exports=o(5600)}};var t=require("../../webpack-api-runtime.js");t.C(e);var o=t(t.s=8737);module.exports=o})();